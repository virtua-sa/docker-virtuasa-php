#!/usr/bin/env bash

shell_quote() {
    # run in a subshell to protect the caller's environment
    (
        sep=''
        for arg in "$@"; do
            sqesc=$(printf '%s\n' "${arg}" | sed -e "s/'/'\\\\''/g")
            printf '%s' "${sep}'${sqesc}'"
            sep=' '
        done
    )
}

export XDEBUG_SESSION=xdebug_is_great
export PHP_IDE_CONFIG="serverName=${CALLEO_CRM_HOSTNAME}"
RUN="php $(shell_quote "$@")"
eval "$RUN"
export XDEBUG_SESSION=""
